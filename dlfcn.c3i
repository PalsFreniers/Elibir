module dlfcn::dl;

distinct Handle = void*;
distinct Fun = void*;

extern fn Handle dlopen(char* file, int flag);
extern fn char* dlerror();
extern fn Fun dlsym(Handle h, char* name);
extern fn int dlclose(Handle h);

fn Handle new(char* file, int flag) => dlopen(file, flag)
fn Fun Handle.getSymbol(self, char* name) => dlsym(self, name);
fn void Handle.close(self) => dlclose(self);
